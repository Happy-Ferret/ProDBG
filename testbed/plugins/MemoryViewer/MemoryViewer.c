#include <ProDBG/ProDBGAPI.h>

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct MyMemoryViewer
{
    int someData;

} MyMemoryViewer;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

enum
{
    MYBUTTON_EVENT = 1,
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static int displayMemory(void* userData, void* data, uint64_t length)
{
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static void uiEvent(void* userData, uint32_t id, uint32_t eventType) 
{
    MyMemoryViewer* data = (MyMemoryViewer*)userData;

    switch (id)
    {
        case MYBUTTON_EVENT :
        {
            break;
        }
    }
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static void* createInstance(void* parentWindow, ServiceFunc* serviceFunc)
{
    MyMemoryViewer* instanceData = malloc(sizeof(MyMemoryViewer));
    PDUIFuncs* uiFuncs = serviceFunc(PD_UI_GLOBAL); 

    uiFuncs->pushButton(parentWindow, "MyTestPutton", MYBUTTON_EVENT);

    return instanceData;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static PDMemoryViewPlugin memoryPlugin =
{
    createInstance,
    destroyInstance,
    displayMemory,
    uiEvent,
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int RegisterPlugin(int version, ServiceFunc* serviceFunc, RegisterPlugin* registerPlugin)
{
    registerPlugin(PD_MEMORY_VIEWER, &memoryPlugin);
}

