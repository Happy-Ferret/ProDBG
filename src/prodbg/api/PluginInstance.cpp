#include "PluginInstance.h"
#include <pd_view.h>
#include <string.h>
#include <stdlib.h>

#ifdef PRODBG_WIN
#include <malloc.h>
#endif

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace prodbg
{

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ViewPluginInstance* PluginInstance_createViewPlugin()
{
	ViewPluginInstance* instance = (ViewPluginInstance*)malloc(sizeof(ViewPluginInstance));
	memset(instance, 0, sizeof(ViewPluginInstance)); 

	return instance;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool PluginInstance_init(ViewPluginInstance* instance, PDViewPlugin* plugin)
{
	void* userData = plugin->createInstance(&instance->ui, 0);
	instance->plugin = plugin;
	instance->userData = userData;

	return true;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}

